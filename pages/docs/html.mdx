import withDocs from '../../components/with_docs';

export default withDocs({
  title: 'HTML Library',
  description: 'How to use the HTML client library for StaticKit.',
  path: '/docs/html'
});

# HTML Library

The StaticKit HTML library is designed to be used in environments where you are crafting HTML by hand (as opposed to using something like React). If you are using a static site generator like **Jekyll**, **Hugo**, or **Middleman**, this is the library for you.

## Installation

If you don't have a modern JavaScript build pipeline in place, the CDN method is the quickest way to get up and running — just place our `<script>` tag anywhere on your page and instantiate your components inline:

```html
<script defer src="https://js.statickit.com/statickit.js"></script>

<script>
  window.sk=window.sk||function(){(sk.q=sk.q||[]).push(arguments)};

  // Put your StaticKit calls here
</script>
```

If you have a JavaScript build pipeline in place, it's best to install StaticKit as a dependency and `import` it in your JavaScript bundle:

```shell
npm i @statickit/standalone
```

```js
import sk from '@statickit/standalone'

// Put your StaticKit calls here
```

## Forms

The form component allows you to gather form submissions from your frontend without writing any backend code. 

Most other form endpoint services give you a URL to put in the `action` attribute and don't include any JavaScript. **We've intentionally taken a different approach.** 

JavaScript-powered forms allow for a superior user experience:

- Validations errors can be rendered inline
- You can render an inline post-submit message
- You can hook into other lifecycle callbacks (e.g for analytics)
- Form spam is less likely because there's not `action` to scrape

### Your first form

At a minimum, you need set your form `id` and `element` selector targeting your `<form>` node:

```html
<form id="my-form">
  <!-- insert fields here -->
</form>

<script>
  window.sk=window.sk||function(){(sk.q=sk.q||[]).push(arguments)};

  sk('form', 'init', {
    id: '[...]' 
    element: '#my-form'
  });
</script>

<script defer src="https://js.statickit.com/statickit.js"></script>
```

Below is working example of an opt-in form. Try it out!

<div className="pb-6">
  <iframe width="100%" height="300" className="rounded-lg" src="//jsfiddle.net/StaticKit/L2hx61cy/embedded/result,html,js/dark/" allowFullScreen="allowfullscreen" frameBorder="0"></iframe>
</div>

You'll notice that we are overriding the `onSuccess` callback to replace the form with a custom message — we'll learn about that next.

### Customizing post-submit behavior

The most common thing you’ll want to customize is the behavior after the form is submitted. By default, the `<form>` element gets replaced with an unstyled “Thank you!” `<div>` element.

Here's an example config that replaces the form with a custom message:

```js
sk('form', 'init', {
  id: '[...]',
  element: '#my-form',
  onSuccess: function(config) {
    var h = config.h;
    var form = config.form;
    var replacement = h('div.success-message', 'Thank you for joining!');
    form.parentNode.replaceChild(replacement, form);
  }
});
```

Let's step through what's happening here:

- `config.h` is a simple helper for creating DOM nodes called [HyperScript](https://github.com/hyperhype/hyperscript)
- `config.form` is a reference to the `<form>` element
- `replacement` is new element to swap in for the `<form>`
- The last line does the actual DOM node replacement

If you want to redirect to a different page, you can do that too:

```js
sk('form', 'init', {
  id: '[...]',
  element: '#my-form',
  onSuccess: function(config) {
    window.location.href = '/thank-you';
  }
});
```


